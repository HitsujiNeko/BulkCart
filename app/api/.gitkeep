# app/api ディレクトリ

このディレクトリには API Routes が配置されます。

## API エンドポイント構成

- `plan/` - 献立関連 API
  - `generate/route.ts` - POST /api/plan/generate（献立生成）
  - `[id]/route.ts` - GET /api/plan/[id]（献立取得）
- `recipes/` - レシピ関連 API
  - `route.ts` - GET /api/recipes（レシピ一覧取得）
  - `[id]/route.ts` - GET /api/recipes/[id]（レシピ詳細取得）
  - `search/route.ts` - POST /api/recipes/search（レシピ検索）
- `grocery/` - 買い物リスト API
  - `route.ts` - POST /api/grocery（買い物リスト生成）
- `prep/` - 作り置き段取り API
  - `route.ts` - POST /api/prep（段取り生成）
- `webhooks/` - Webhook エンドポイント
  - `stripe/route.ts` - POST /api/webhooks/stripe（Stripe Webhook）

## アーキテクチャ原則

**API Routes は薄く保ち、ビジネスロジックは lib/* に配置**

```typescript
// ✅ 良い例
export async function POST(request: NextRequest) {
  const supabase = createClient();
  const { data: { user } } = await supabase.auth.getUser();
  
  if (!user) {
    return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
  }
  
  // ビジネスロジックは lib/* に委譲
  const plan = await generatePlan(supabase, user.id, new Date());
  
  return NextResponse.json({ plan }, { status: 200 });
}
```

## 実装予定

Phase 5（バックエンドロジック実装）で実装予定
